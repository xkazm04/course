@import "tailwindcss";
@import "../styles/themes/map-themes.css";

/* === CODE SYNTAX HIGHLIGHTING (highlight.js compatible) === */
/* Custom Forge theme for code blocks */
.hljs {
  color: var(--forge-text-primary);
  background: transparent;
}

.hljs-comment,
.hljs-quote {
  color: #6b7280;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-addition {
  color: #c026d3; /* Purple for keywords */
}

.hljs-number,
.hljs-string,
.hljs-meta .hljs-meta-string,
.hljs-literal,
.hljs-doctag,
.hljs-regexp {
  color: #059669; /* Green for strings/numbers */
}

.hljs-title,
.hljs-section,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class {
  color: #2563eb; /* Blue for functions/classes */
}

.hljs-attribute,
.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-class .hljs-title,
.hljs-type {
  color: #d97706; /* Amber for attributes */
}

.hljs-symbol,
.hljs-bullet,
.hljs-subst,
.hljs-meta,
.hljs-meta .hljs-keyword,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-link {
  color: #dc2626; /* Red for symbols */
}

.hljs-built_in,
.hljs-deletion {
  color: #7c3aed; /* Violet for built-ins */
}

.hljs-formula {
  background: rgba(0, 0, 0, 0.05);
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

/* Dark mode syntax highlighting */
.dark .hljs {
  color: var(--forge-text-primary);
}

.dark .hljs-comment,
.dark .hljs-quote {
  color: #9ca3af;
}

.dark .hljs-keyword,
.dark .hljs-selector-tag,
.dark .hljs-addition {
  color: #e879f9;
}

.dark .hljs-number,
.dark .hljs-string,
.dark .hljs-meta .hljs-meta-string,
.dark .hljs-literal,
.dark .hljs-doctag,
.dark .hljs-regexp {
  color: #34d399;
}

.dark .hljs-title,
.dark .hljs-section,
.dark .hljs-name,
.dark .hljs-selector-id,
.dark .hljs-selector-class {
  color: #60a5fa;
}

.dark .hljs-attribute,
.dark .hljs-attr,
.dark .hljs-variable,
.dark .hljs-template-variable,
.dark .hljs-class .hljs-title,
.dark .hljs-type {
  color: #fbbf24;
}

.dark .hljs-symbol,
.dark .hljs-bullet,
.dark .hljs-subst,
.dark .hljs-meta,
.dark .hljs-meta .hljs-keyword,
.dark .hljs-selector-attr,
.dark .hljs-selector-pseudo,
.dark .hljs-link {
  color: #f87171;
}

.dark .hljs-built_in,
.dark .hljs-deletion {
  color: #a78bfa;
}

.dark .hljs-formula {
  background: rgba(255, 255, 255, 0.05);
}

:root {
  /* === OPENFORGE DESIGN SYSTEM === */
  /* Light Mode - "Daylight Workshop" - Warm, professional tones */
  --forge-bg-daylight: #FAFAF8;
  --forge-bg-workshop: #FFFFFF;
  --forge-bg-bench: #F7F5F3;
  --forge-bg-elevated: #FFFFFF;
  --forge-bg-void: #F0EEEC;
  --forge-bg-forge: #FAFAF8;
  --forge-bg-anvil: #FFFFFF;
  --forge-border-subtle: #E8E4E0;
  --forge-border-default: #D4CFC9;
  --forge-text-muted: #8C857D;
  --forge-text-secondary: #5C564E;
  --forge-text-primary: #1A1816;
  --forge-text-bright: #0D0C0B;
  --forge-ember: #C2410C;

  /* Ember Spectrum - Adjusted for light mode visibility */
  --ember-dim: #9A3600;
  --ember: #C2410C;
  --ember-bright: #DC5A1A;
  --ember-glow: #E86F35;
  --molten: #F59E5E;
  --gold: #D4A853;
  --spark: #E8C88A;

  /* Semantic - High contrast for light mode */
  --forge-success: #0D7A4F;
  --forge-warning: #B45309;
  --forge-error: #B91C1C;
  --forge-info: #1D4ED8;

  /* === SURFACES === */
  --surface-base: #F0F2F5;
  --surface-elevated: rgba(255, 255, 255, 0.6);
  --surface-overlay: rgba(255, 255, 255, 0.8);
  --surface-card: rgba(255, 255, 255, 0.1);
  --surface-inset: rgba(241, 245, 249, 0.5);

  /* === TEXT === */
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --text-muted: #64748b;
  /* High-contrast muted text for small text (text-xs, text-sm) - 5.5:1+ ratio on surface-base */
  --text-muted-high: #4b5563;
  --text-inverse: #ffffff;

  /* === BORDERS === */
  --border-subtle: rgba(255, 255, 255, 0.2);
  --border-default: rgba(255, 255, 255, 0.5);
  --border-strong: rgba(0, 0, 0, 0.1);

  /* === ACCENTS === */
  --accent-primary: #4f46e5;
  --accent-primary-hover: #4338ca;
  --accent-secondary: #a855f7;
  --accent-tertiary: #06b6d4;

  /* === SEMANTIC ACCENT COLORS (for domain-specific use) === */
  --color-indigo: #6366f1;
  --color-purple: #a855f7;
  --color-emerald: #10b981;
  --color-cyan: #06b6d4;
  --color-orange: #f97316;
  --color-pink: #ec4899;
  --color-blue: #3b82f6;
  --color-amber: #f59e0b;
  --color-red: #ef4444;

  /* === GRADIENTS === */
  --gradient-hero-from: #0f172a;
  --gradient-hero-via: #334155;
  --gradient-hero-to: #0f172a;
  --gradient-accent: linear-gradient(to right, #6366f1, #a855f7, #06b6d4);
  --gradient-mesh-1: linear-gradient(to bottom right, rgba(199,210,254,0.3), rgba(233,213,255,0.3), rgba(191,219,254,0.3));
  --gradient-mesh-2: linear-gradient(to top left, rgba(165,243,252,0.3), rgba(251,207,232,0.3), rgba(199,210,254,0.3));

  /* === SHADOWS === */
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
  --shadow-md: 0 8px 24px rgba(0,0,0,0.08);
  --shadow-lg: 0 20px 50px rgba(0,0,0,0.1);
  --shadow-glow: 0 0 40px rgba(99,102,241,0.15);

  /* === STATUS === */
  --status-success-bg: rgba(220,252,231,0.5);
  --status-success-text: #15803d;
  --status-success-border: #bbf7d0;
  --status-warning-bg: rgba(254,249,195,0.5);
  --status-warning-text: #a16207;
  --status-warning-border: #fde047;
  --status-error-bg: rgba(254,226,226,0.5);
  --status-error-text: #dc2626;
  --status-error-border: #fecaca;

  /* === GLASS EFFECT === */
  --glass-blur: 10px;
  --glass-bg: rgba(255, 255, 255, 0.1);
  --glass-border: rgba(255, 255, 255, 0.2);

  /* === GRID PATTERN === */
  --grid-color: rgba(0, 0, 0, 0.05);
  --grid-size: 40px;

  /* === INTERACTIVE STATES === */
  --hover-overlay: rgba(0, 0, 0, 0.05);
  --active-overlay: rgba(0, 0, 0, 0.1);
  --focus-ring: rgba(99, 102, 241, 0.5);

  /* === BUTTON VARIANTS === */
  --btn-primary-bg: #0f172a;
  --btn-primary-text: #ffffff;
  --btn-secondary-bg: rgba(255, 255, 255, 0.5);
  --btn-secondary-text: #0f172a;
  --btn-secondary-border: rgba(255, 255, 255, 0.6);

  /* === BUTTON SIZING SCALE === */
  /* Small: compact actions, inline buttons */
  --btn-padding-sm-x: 0.75rem;  /* 12px / px-3 */
  --btn-padding-sm-y: 0.375rem; /* 6px / py-1.5 */
  /* Medium: standard buttons, form actions */
  --btn-padding-md-x: 1rem;     /* 16px / px-4 */
  --btn-padding-md-y: 0.5rem;   /* 8px / py-2 */
  /* Large: primary CTAs, hero buttons */
  --btn-padding-lg-x: 1.5rem;   /* 24px / px-6 */
  --btn-padding-lg-y: 0.75rem;  /* 12px / py-3 */

  /* === SLOT SPACING SCALE === */
  /* Standardized padding tokens for slot renderers based on content importance */
  /* sm: secondary/supporting content (key points, tips, notes) */
  --slot-padding-sm: 1rem;      /* 16px / p-4 */
  /* md: standard content areas (progress panels, section lists) */
  --slot-padding-md: 1.25rem;   /* 20px / p-5 */
  /* lg: primary/header content (chapter headers, highlighted sections) */
  --slot-padding-lg: 1.5rem;    /* 24px / p-6 */

  /* === ANIMATION TIMING TOKENS === */
  /* Unified animation timing scale for consistent motion feel */
  --duration-instant: 0.1s;   /* Micro-interactions: toggles, focus states */
  --duration-fast: 0.2s;      /* Quick feedback: menu open/close, tooltips */
  --duration-normal: 0.3s;    /* Standard transitions: expansion, reveal */
  --duration-slow: 0.5s;      /* Deliberate animations: progress bars, onboarding */
  --duration-decorative: 20s; /* Ambient/decorative: background gradients */

  /* Easing curves (matching framer-motion conventions) */
  --ease-out: cubic-bezier(0.0, 0.0, 0.2, 1);      /* Standard ease-out */
  --ease-in-out: cubic-bezier(0.4, 0.0, 0.2, 1);   /* For symmetric animations */
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1); /* Bouncy/spring-like */

  /* === ORACLE/STEPPER THEME TOKENS === */
  --oracle-gradient-from: #F7F5F3;
  --oracle-gradient-via: #FAFAF8;
  --oracle-gradient-to: #F7F5F3;
  --oracle-vignette: rgba(0, 0, 0, 0.05);
  --oracle-text-heading: #1A1816;
  --oracle-text-on-ember: #FFFFFF;

  /* === LEGACY COMPATIBILITY === */
  --background: #F0F2F5;
  --foreground: #171717;
  --card-bg: rgba(255, 255, 255, 0.6);
  --card-border: rgba(255, 255, 255, 0.5);
}

.dark {
  /* Button sizing scale is inherited from :root (same for both themes) */

  /* === OPENFORGE DESIGN SYSTEM - Dark Mode "The Forge" === */
  /* Very dark, near-black backgrounds for proper contrast */
  --forge-bg-void: #09090A;
  --forge-bg-forge: #0D0D0E;
  --forge-bg-anvil: #141416;
  --forge-bg-elevated: #1C1C1F;
  --forge-bg-daylight: #0D0D0E;
  --forge-bg-workshop: #141416;
  --forge-bg-bench: #1C1C1F;
  --forge-border-subtle: #252528;
  --forge-border-default: #32323A;
  --forge-text-muted: #71717A;
  --forge-text-secondary: #A1A1AA;
  --forge-text-primary: #FAFAFA;
  --forge-text-bright: #FFFFFF;
  --forge-ember: #F97316;

  /* Ember Spectrum - Deep lava orange for dark backgrounds */
  --ember-dim: #451A03;
  --ember: #7C2D12;
  --ember-bright: #9A3412;
  --ember-glow: #B45309;
  --molten: #C2410C;
  --gold: #D97706;
  --spark: #EA580C;

  /* Semantic - Vibrant for dark backgrounds */
  --forge-success: #4ADE80;
  --forge-warning: #FBBF24;
  --forge-error: #F87171;
  --forge-info: #60A5FA;

  /* === SURFACES === */
  --surface-base: #0a0f1a;
  --surface-elevated: rgba(30, 41, 59, 0.6);
  --surface-overlay: rgba(30, 41, 59, 0.8);
  --surface-card: rgba(30, 41, 59, 0.5);
  --surface-inset: rgba(15, 23, 42, 0.5);

  /* === TEXT === */
  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-muted: #64748b;
  /* High-contrast muted text for small text (text-xs, text-sm) - 5.5:1+ ratio on dark surfaces */
  --text-muted-high: #94a3b8;
  --text-inverse: #0f172a;

  /* === BORDERS === */
  --border-subtle: rgba(51, 65, 85, 0.3);
  --border-default: rgba(51, 65, 85, 0.5);
  --border-strong: rgba(255, 255, 255, 0.1);

  /* === ACCENTS === */
  --accent-primary: #818cf8;
  --accent-primary-hover: #a5b4fc;
  --accent-secondary: #c084fc;
  --accent-tertiary: #22d3ee;

  /* === SEMANTIC ACCENT COLORS (for domain-specific use) === */
  --color-indigo: #818cf8;
  --color-purple: #c084fc;
  --color-emerald: #34d399;
  --color-cyan: #22d3ee;
  --color-orange: #fb923c;
  --color-pink: #f472b6;
  --color-blue: #60a5fa;
  --color-amber: #fbbf24;
  --color-red: #f87171;

  /* === GRADIENTS === */
  --gradient-hero-from: #f1f5f9;
  --gradient-hero-via: #cbd5e1;
  --gradient-hero-to: #94a3b8;
  --gradient-accent: linear-gradient(to right, #818cf8, #c084fc, #22d3ee);
  --gradient-mesh-1: linear-gradient(to bottom right, rgba(49,46,129,0.3), rgba(88,28,135,0.3), rgba(30,58,138,0.3));
  --gradient-mesh-2: linear-gradient(to top left, rgba(22,78,99,0.3), rgba(131,24,67,0.3), rgba(49,46,129,0.3));

  /* === SHADOWS === */
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.2);
  --shadow-md: 0 8px 24px rgba(0,0,0,0.35);
  --shadow-lg: 0 20px 50px rgba(0,0,0,0.5);
  --shadow-glow: 0 0 40px rgba(129,140,248,0.2);

  /* === STATUS === */
  --status-success-bg: rgba(6,78,59,0.3);
  --status-success-text: #4ade80;
  --status-success-border: rgba(34,197,94,0.3);
  --status-warning-bg: rgba(120,53,15,0.3);
  --status-warning-text: #fbbf24;
  --status-warning-border: rgba(251,191,36,0.3);
  --status-error-bg: rgba(127,29,29,0.3);
  --status-error-text: #f87171;
  --status-error-border: rgba(248,113,113,0.3);

  /* === GLASS EFFECT === */
  --glass-blur: 10px;
  --glass-bg: rgba(30, 41, 59, 0.6);
  --glass-border: rgba(51, 65, 85, 0.5);

  /* === GRID PATTERN === */
  --grid-color: rgba(255, 255, 255, 0.03);
  --grid-size: 40px;

  /* === INTERACTIVE STATES === */
  --hover-overlay: rgba(255, 255, 255, 0.05);
  --active-overlay: rgba(255, 255, 255, 0.1);
  --focus-ring: rgba(129, 140, 248, 0.5);

  /* === BUTTON VARIANTS === */
  --btn-primary-bg: #ffffff;
  --btn-primary-text: #0f172a;
  --btn-secondary-bg: rgba(30, 41, 59, 0.5);
  --btn-secondary-text: #ffffff;
  --btn-secondary-border: rgba(51, 65, 85, 0.6);

  /* === ORACLE/STEPPER THEME TOKENS === */
  --oracle-gradient-from: #09090A;
  --oracle-gradient-via: #0D0D0E;
  --oracle-gradient-to: #09090A;
  --oracle-vignette: rgba(0, 0, 0, 0.4);
  --oracle-text-heading: #FAFAFA;
  --oracle-text-on-ember: #FFFFFF;

  /* === LEGACY COMPATIBILITY === */
  --background: #0a0f1a;
  --foreground: #f1f5f9;
  --card-bg: rgba(30, 41, 59, 0.6);
  --card-border: rgba(51, 65, 85, 0.5);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--surface-base);
  color: var(--text-primary);
  font-family: Arial, Helvetica, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* === ANIMATIONS === */
@keyframes scan {
  0% { top: 0% }
  100% { top: 100% }
}

@keyframes shimmer {
  0% { transform: translateX(-100%) }
  100% { transform: translateX(100%) }
}

@keyframes float {
  0%, 100% { transform: translateY(0px) }
  50% { transform: translateY(-10px) }
}

@keyframes twinkle {
  0%, 100% { opacity: 0.1 }
  50% { opacity: 0.5 }
}

@keyframes pulse-indicator {
  0%, 100% { transform: scale(1); opacity: 0.8 }
  50% { transform: scale(1.3); opacity: 1 }
}

/* === HYPOTHETICAL NODE GRADIENT ANIMATION === */
@keyframes gradient-shift {
  0% { background-position: 0% 50% }
  50% { background-position: 100% 50% }
  100% { background-position: 0% 50% }
}

.animate-gradient-shift {
  animation: gradient-shift 3s ease-in-out infinite;
}

/* === ENTRANCE ANIMATIONS === */
/* Fade in with slide up - standard entrance animation */
@keyframes entrance-fade-up {
  from {
    opacity: 0;
    transform: translateY(1.25rem); /* 20px = translate-y-5 */
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Fade in with scale - for preview/card entrances */
@keyframes entrance-fade-scale {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Fade in with slide from left */
@keyframes entrance-fade-left {
  from {
    opacity: 0;
    transform: translateX(-1.25rem); /* -20px */
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Simple fade in */
@keyframes entrance-fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Fade in with slide from right */
@keyframes entrance-fade-right {
  from {
    opacity: 0;
    transform: translateX(1.25rem); /* 20px */
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Entrance animation utility classes */
.animate-entrance-fade-up {
  animation: entrance-fade-up var(--duration-slow) var(--ease-out) forwards;
  opacity: 0; /* Start hidden, animation fills to visible */
}

.animate-entrance-fade-scale {
  animation: entrance-fade-scale 0.7s var(--ease-out) forwards;
  opacity: 0;
}

.animate-entrance-fade-left {
  animation: entrance-fade-left var(--duration-slow) var(--ease-out) forwards;
  opacity: 0;
}

.animate-entrance-fade {
  animation: entrance-fade var(--duration-slow) var(--ease-out) forwards;
  opacity: 0;
}

.animate-entrance-fade-right {
  animation: entrance-fade-right var(--duration-slow) var(--ease-out) forwards;
  opacity: 0;
}

/* Animation delay utilities for staggered entrances */
.animation-delay-100 { animation-delay: 100ms; }
.animation-delay-200 { animation-delay: 200ms; }
.animation-delay-300 { animation-delay: 300ms; }
.animation-delay-400 { animation-delay: 400ms; }
.animation-delay-500 { animation-delay: 500ms; }
.animation-delay-600 { animation-delay: 600ms; }
.animation-delay-700 { animation-delay: 700ms; }

.animate-scan {
  animation: scan 2s linear infinite;
}

.animate-spin-slow {
  animation: spin 3s linear infinite;
}

.animate-shimmer {
  animation: shimmer 1.5s linear infinite;
}

/* Progress bar shimmer sweep - GPU-accelerated CSS animation for progress bars */
@keyframes progress-shimmer-sweep {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.animate-progress-shimmer {
  animation: progress-shimmer-sweep 2s linear infinite;
}

.animate-float {
  animation: float 5s ease-in-out infinite;
}

.animate-twinkle {
  animation: twinkle 3s ease-in-out infinite;
}

.animate-pulse-indicator {
  animation: pulse-indicator 1.5s ease-in-out infinite;
}

/* === SCROLLBAR === */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* === NOISE TEXTURE === */
.noise-texture {
  background-image: url('https://grainy-gradients.vercel.app/noise.svg');
  opacity: 0.03;
}

/* === 3D GRID FLOOR === */
.grid-floor {
  background-size: var(--grid-size) var(--grid-size);
  background-image:
    linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
    linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
}

/* === GLASS CARD UTILITY === */
.glass-card {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-border);
}

/* === SELECTION === */
::selection {
  background: rgba(99, 102, 241, 0.2);
}

.dark ::selection {
  background: rgba(129, 140, 248, 0.3);
}

/* === ICON-TEXT ALIGNMENT UTILITIES === */
/*
 * Consistent icon-to-text alignment system
 * Use these utilities to ensure icons align perfectly with adjacent text
 * regardless of line-height or container sizing differences.
 */

/* Base icon-text alignment container - use with flex */
.icon-text-align {
  display: flex;
  align-items: center;
  gap: 0.5rem; /* 8px default gap */
}

/* Icon container - ensures consistent optical alignment */
.icon-text-align > svg,
.icon-text-align > [data-icon] {
  flex-shrink: 0;
  /* Optical alignment adjustment - icons often need slight upward shift */
  transform: translateY(-0.5px);
}

/* Variant with tighter gap for compact UIs */
.icon-text-align-tight {
  display: flex;
  align-items: center;
  gap: 0.25rem; /* 4px gap */
}

.icon-text-align-tight > svg,
.icon-text-align-tight > [data-icon] {
  flex-shrink: 0;
  transform: translateY(-0.5px);
}

/* Variant with wider gap for spacious layouts */
.icon-text-align-wide {
  display: flex;
  align-items: center;
  gap: 0.75rem; /* 12px gap */
}

.icon-text-align-wide > svg,
.icon-text-align-wide > [data-icon] {
  flex-shrink: 0;
  transform: translateY(-0.5px);
}

/* Icon container wrapper - for icons in sized containers (e.g., 48px boxes) */
.icon-container-align {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

/* Leading-none utility for icon containers - removes line-height impact */
.icon-leading-none {
  line-height: 1;
}

/* === KNOWLEDGE MAP CONNECTIONS === */
/*
 * Single CSS animation for all connection paths in the knowledge map.
 * Uses strokeDasharray/strokeDashoffset for draw-in effect.
 * This is ~95% more performant than individual Framer Motion pathLength animations.
 */
@keyframes km-connection-draw {
  from {
    stroke-dashoffset: 1000;
    opacity: 0;
  }
  to {
    stroke-dashoffset: 0;
    opacity: 1;
  }
}

/* Container group - entry animation applied once to all connections */
.km-connections-group {
  animation: km-connection-draw 0.6s var(--ease-out) forwards;
}

/* Individual path styling with smooth stroke-dasharray for draw effect */
.km-connection-path {
  stroke-dasharray: 1000;
  stroke-dashoffset: 0;
  transition: stroke-opacity var(--duration-normal) var(--ease-out);
}

/* Reduced motion: show connections immediately without animation */
@media (prefers-reduced-motion: reduce) {
  .km-connections-group {
    animation: none;
  }

  .km-connection-path {
    stroke-dasharray: none;
    stroke-dashoffset: 0;
    opacity: 1;
  }
}

/* === OPENFORGE DESIGN SYSTEM UTILITIES === */

/* Ember shadows - Light mode */
.shadow-ember-sm { box-shadow: 0 2px 8px -2px rgba(194, 65, 12, 0.2); }
.shadow-ember { box-shadow: 0 4px 16px -4px rgba(194, 65, 12, 0.25); }
.shadow-ember-glow { box-shadow: 0 0 24px -4px rgba(194, 65, 12, 0.3); }
.shadow-ember-intense { box-shadow: 0 0 40px -4px rgba(194, 65, 12, 0.4); }

/* Dark mode shadows - More vibrant */
.dark .shadow-ember-sm { box-shadow: 0 2px 8px -2px rgba(249, 115, 22, 0.25); }
.dark .shadow-ember { box-shadow: 0 4px 16px -4px rgba(249, 115, 22, 0.3); }
.dark .shadow-ember-glow { box-shadow: 0 0 24px -4px rgba(249, 115, 22, 0.4); }
.dark .shadow-ember-intense { box-shadow: 0 0 40px -4px rgba(249, 115, 22, 0.5); }

/* Forge gradients - Light mode (deeper, richer) */
.bg-gradient-forge { background: linear-gradient(135deg, #C2410C 0%, #DC5A1A 50%, #E86F35 100%); }
.bg-gradient-gold { background: linear-gradient(135deg, #D4A853 0%, #E8C88A 50%, #F5DEB3 100%); }
.bg-gradient-ambient { background: radial-gradient(ellipse at 50% 0%, rgba(194, 65, 12, 0.08) 0%, transparent 60%); }
.text-gradient-forge { background: linear-gradient(135deg, #C2410C 0%, #DC5A1A 50%, #E86F35 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }

/* Dark mode gradients - Deep lava orange */
.dark .bg-gradient-forge { background: linear-gradient(135deg, #7C2D12 0%, #9A3412 50%, #B45309 100%); }
.dark .bg-gradient-gold { background: linear-gradient(135deg, #92400E 0%, #B45309 50%, #D97706 100%); }
.dark .bg-gradient-ambient { background: radial-gradient(ellipse at 50% 0%, rgba(154, 52, 18, 0.15) 0%, transparent 60%); }
.dark .text-gradient-forge { background: linear-gradient(135deg, #B45309 0%, #C2410C 50%, #EA580C 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }

/* Glow effects */
.glow-ember { filter: drop-shadow(0 0 6px rgba(194, 65, 12, 0.4)); }
.glow-gold { filter: drop-shadow(0 0 6px rgba(212, 168, 83, 0.4)); }
.dark .glow-ember { filter: drop-shadow(0 0 8px rgba(180, 83, 9, 0.6)); }
.dark .glow-gold { filter: drop-shadow(0 0 8px rgba(217, 119, 6, 0.5)); }

/* Forge animations */
@keyframes ember-rise {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translateY(-20px) scale(0); opacity: 0; }
}

@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 20px rgba(232, 90, 0, 0.3); }
  50% { box-shadow: 0 0 40px rgba(232, 90, 0, 0.6); }
}

@keyframes forge-shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(200%); }
}

.animate-ember-rise { animation: ember-rise 2s ease-out infinite; }
.animate-glow-pulse { animation: glow-pulse 2s ease-in-out infinite; }
.animate-forge-shimmer { animation: forge-shimmer 2s infinite; }

/* Forge Background Animations - Optimized for performance */
@keyframes forge-grid-pulse {
  0%, 100% { opacity: 0.04; }
  50% { opacity: 0.07; }
}

@keyframes forge-grid-drift {
  0% { background-position: 0px 0px; }
  100% { background-position: 240px 240px; }
}

@keyframes forge-ember-float {
  0%, 100% { transform: translateY(0) scale(0.8); opacity: 0.3; }
  50% { transform: translateY(-20px) scale(1.2); opacity: 0.6; }
}

@keyframes forge-glow-rotate {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.2); }
  100% { transform: rotate(360deg) scale(1); }
}

.animate-forge-grid-pulse { animation: forge-grid-pulse 8s ease-in-out infinite; }
.animate-forge-grid-drift { animation: forge-grid-drift 60s linear infinite; }
.animate-forge-ember { animation: forge-ember-float 4s ease-in-out infinite; }
.animate-forge-glow { animation: forge-glow-rotate 30s linear infinite; }

/* Skill chip first selection celebration glow */
@keyframes skill-chip-celebrate {
  0% {
    box-shadow: 0 0 0 0 rgba(194, 65, 12, 0.4);
  }
  50% {
    box-shadow: 0 0 12px 4px rgba(194, 65, 12, 0.6);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(194, 65, 12, 0);
  }
}

.skill-chip-first-glow {
  animation: skill-chip-celebrate 0.6s ease-out forwards;
}

/* Molten progress bar */
.molten-progress {
  background: linear-gradient(90deg, #C2410C, #DC5A1A, #E86F35);
  position: relative;
  overflow: hidden;
}

.dark .molten-progress {
  background: linear-gradient(90deg, #7C2D12, #9A3412, #B45309);
}

.molten-progress::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
  animation: forge-shimmer 2s infinite;
}

/* Forge card - refined hover effects */
.forge-card {
  position: relative;
  overflow: hidden;
  transition: all 0.2s ease;
}

.forge-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--ember), transparent);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.forge-card:hover::before {
  opacity: 0.6;
}

.forge-card:hover {
  border-color: var(--forge-border-default);
}

.dark .forge-card:hover {
  border-color: rgba(249, 115, 22, 0.3);
}

/* === READING MODE STYLES === */
/* Focus Mode - Reduced distractions, dimmed UI elements */
.reading-mode-focus {
  /* Dim non-content elements */
  --forge-text-muted: #9CA3AF;
  --forge-border-subtle: rgba(0, 0, 0, 0.05);
}

.reading-mode-focus .chapter-sidebar,
.reading-mode-focus .chapter-header-nav,
.reading-mode-focus .chapter-meta {
  opacity: 0.4;
  transition: opacity 0.2s ease;
}

.reading-mode-focus .chapter-sidebar:hover,
.reading-mode-focus .chapter-sidebar:focus-within,
.reading-mode-focus .chapter-header-nav:hover,
.reading-mode-focus .chapter-meta:hover {
  opacity: 1;
}

/* Night Mode - Warm tones, reduced blue light */
.reading-mode-night {
  /* Warmer background tones */
  --forge-bg-void: #1A1510;
  --forge-bg-daylight: #1F1914;
  --forge-bg-elevated: #2A2219;
  --forge-bg-bench: #352B20;

  /* Warmer text tones */
  --forge-text-primary: #F5E6D3;
  --forge-text-secondary: #D4C4B0;
  --forge-text-muted: #A89880;

  /* Warmer border tones */
  --forge-border-subtle: #3D3228;
  --forge-border-default: #4D4238;

  /* Warmer ember accent */
  --ember: #E67E22;

  /* Filter to reduce blue light */
  filter: sepia(10%);
}

/* Light mode night reading */
:root .reading-mode-night {
  --forge-bg-void: #FDF8F0;
  --forge-bg-daylight: #FFF9F2;
  --forge-bg-elevated: #FFFAF5;
  --forge-bg-bench: #FEF5EB;

  --forge-text-primary: #3D2E1F;
  --forge-text-secondary: #5D4E3F;
  --forge-text-muted: #8D7E6F;

  --forge-border-subtle: #E8DDD0;
  --forge-border-default: #D8CCBF;

  filter: sepia(5%);
}

/* Reading content typography enhancement */
.reading-content {
  max-width: 70ch;
  font-feature-settings: 'kern' 1, 'liga' 1;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Font size utility classes */
.reading-font-small {
  font-size: 0.875rem;
  line-height: 1.7;
}

.reading-font-medium {
  font-size: 1rem;
  line-height: 1.75;
}

.reading-font-large {
  font-size: 1.125rem;
  line-height: 1.8;
}

.reading-font-xl {
  font-size: 1.25rem;
  line-height: 1.85;
}

/* Smooth transitions for reading preferences changes */
.reading-transition {
  transition: font-size 0.2s ease, line-height 0.2s ease, color 0.3s ease, background-color 0.3s ease;
}

/* === REDUCED MOTION SUPPORT === */
/* Users who prefer reduced motion (accessibility setting) */
@media (prefers-reduced-motion: reduce) {
  /* Disable all CSS animations */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Disable specific landing page animations */
  .animate-scan,
  .animate-spin-slow,
  .animate-shimmer,
  .animate-float,
  .animate-twinkle,
  .animate-pulse-indicator,
  .animate-progress-shimmer {
    animation: none !important;
  }

  /* Remove perspective and 3D transforms for reduced motion */
  .perspective-\[2000px\] {
    perspective: none;
  }

  /* Simplify gradient animations - make them static */
  .blur-\[120px\] {
    animation: none !important;
  }
}
